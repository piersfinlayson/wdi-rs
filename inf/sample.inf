; #INF_FILENAME#
; Copyright (c) 2010-2023 Pete Batard <pete@akeo.ie> (GNU LGPL)
;
; Modified 2025 Piers Finlayson <piers@piers.rocks>
;
; Must have LF (not CRLF) line endings for libwdi to parse.
;
; Changes:
; - DeviceName
; - VendorName
; - SourceName
; - Provider
[Strings]
DeviceName = "wdi-rs Device"
VendorName = "piers.rocks"
SourceName = "wdi-rs"
DeviceID   = "#DEVICE_HARDWARE_ID#"
DeviceGUID = "#DEVICE_INTERFACE_GUID#"

[Version]
Signature   = "$Windows NT$"
Class       = "USBDevice"
ClassGuid   = {88bae032-5a81-49f0-bc3d-a4ff138216d6}
Provider    = %VendorName%
CatalogFile = #CAT_FILENAME#
DriverVer   = #DRIVER_DATE#, #DRIVER_VERSION#

[ClassInstall32]
Addreg = WinUSBDeviceClassReg

[WinUSBDeviceClassReg]
HKR,,,0,"Universal Serial Bus devices"
HKR,,Icon,,-20

[Manufacturer]
%VendorName% = libusbDevice_WinUSB,NTx86,NTamd64,NTarm64

[libusbDevice_WinUSB.NTx86]
%DeviceName% = USB_Install, USB\%DeviceID%

[libusbDevice_WinUSB.NTamd64]
%DeviceName% = USB_Install, USB\%DeviceID%

[libusbDevice_WinUSB.NTarm64]
%DeviceName% = USB_Install, USB\%DeviceID%

[USB_Install]
Include = winusb.inf
Needs   = WINUSB.NT

[USB_Install.Services]
Include    = winusb.inf
AddService = WinUSB,0x00000002,WinUSB_ServiceInstall

[WinUSB_ServiceInstall]
DisplayName   = "WinUSB - Kernel Driver #DRIVER_DATE# #DRIVER_VERSION#"
ServiceType   = 1
StartType     = 3
ErrorControl  = 1
ServiceBinary = %12%\WinUSB.sys

[USB_Install.Wdf]
KmdfService = WINUSB, WinUsb_Install

[WinUSB_Install]
KmdfLibraryVersion = #KMDF_VERSION#

[USB_Install.HW]
AddReg = #USE_DEVICE_INTERFACE_GUID#
AddReg = #USE_DEVICE_INTERFACE_GUID#, USB_AddReg

[NoDeviceInterfaceGUID]
; Avoids adding a DeviceInterfaceGUID for generic driver

[AddDeviceInterfaceGUID]
HKR,,DeviceInterfaceGUIDs,0x10000,%DeviceGUID%

[USB_Install.NTx86.CoInstallers]
AddReg    = CoInstallers_AddReg
CopyFiles = CoInstallers_CopyFiles

[USB_Install.NTamd64.CoInstallers]
AddReg    = CoInstallers_AddReg
CopyFiles = CoInstallers_CopyFiles

[USB_Install.NTarm64.CoInstallers]
;

[CoInstallers_AddReg]
HKR,,CoInstallers32,0x00010000,"WdfCoInstaller#WDF_VERSION#.dll,WdfCoInstaller","WinUSBCoInstaller2.dll"

[CoInstallers_CopyFiles]
WinUSBCoInstaller2.dll
WdfCoInstaller#WDF_VERSION#.dll

[DestinationDirs]
CoInstallers_CopyFiles = 11

[SourceDisksNames]
1 = %SourceName%

[SourceDisksFiles.x86]
WinUSBCoInstaller2.dll = 1,x86
WdfCoInstaller#WDF_VERSION#.dll = 1,x86

[SourceDisksFiles.amd64]
WinUSBCoInstaller2.dll = 1,amd64
WdfCoInstaller#WDF_VERSION#.dll = 1,amd64

[SourceDisksFiles.arm64]
;